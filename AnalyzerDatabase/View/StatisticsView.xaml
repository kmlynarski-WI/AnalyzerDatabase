<UserControl x:Class="AnalyzerDatabase.View.StatisticsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:controls="http://metro.mahapps.com/winfx/xaml/controls"
             xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf"
             xmlns:res="clr-namespace:AnalyzerDatabase.Properties"
             xmlns:converters="clr-namespace:AnalyzerDatabase.Converters"
             mc:Ignorable="d" 
             d:DesignHeight="720" d:DesignWidth="900"
             DataContext="{Binding Source={StaticResource Locator}, Path=Statistics}">

    <UserControl.Resources>
        <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        <converters:NegativeBooleanToVisibilityConverter x:Key="NegativeBooleanToVisibilityConverter"/>
    </UserControl.Resources>

    <Grid>
        <TabControl Margin="30,30,0,0">
            <controls:MetroTabItem Header="{x:Static res:Resources.OverallStatistics}">
                <Grid Margin="40,50,0,0">
                    <!--<Button HorizontalAlignment="Left" VerticalAlignment="Top"
                            Margin="-38,-40,0,0"
                            ToolTip="{x:Static res:Resources.RefreshData}"
                            Command="{Binding RefreshOverallData}"
                            CommandParameter="{Binding ElementName=ChartOverall}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_refresh}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>-->

                    <!--<TextBlock Text="TYTUL WYKRESU" FontSize="20" Width="200" Height="30" Margin="527,10,97,553" />-->

                    <!-- Eksport wykresu nr 1 -->
                    <Button HorizontalAlignment="Left" VerticalAlignment="Top"
                            Margin="667,-40,0,0"
                            ToolTip="{x:Static res:Resources.ExportToPng1}"
                            Command="{Binding ExportChartToImageCommand}"
                            CommandParameter="{Binding ElementName=ChartOverall}" Width="60">
                        <Rectangle Width="50" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_image_export}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <Button HorizontalAlignment="Left" VerticalAlignment="Top"
                            Margin="732,-40,0,0"
                            ToolTip="{x:Static res:Resources.ExportToCsv1}"
                            Command="{Binding ExportChartDataToCsvCommand1}"
                            CommandParameter="{Binding ElementName=ChartOverall}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_office_excel}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <!-- Eksport wykresu nr 2 -->
                    <Button HorizontalAlignment="Left" VerticalAlignment="Top"
                            Margin="667,276,0,0"
                            ToolTip="{x:Static res:Resources.ExportToPng2}"
                            Command="{Binding ExportChartToImageCommand}"
                            CommandParameter="{Binding ElementName=ChartOverall2}">
                        <Rectangle Width="50" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_image_export}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <Button HorizontalAlignment="Left" VerticalAlignment="Top"
                            Margin="732,276,0,0"
                            ToolTip="{x:Static res:Resources.ExportToCsv2}"
                            Command="{Binding ExportChartDataToCsvCommand2}"
                            CommandParameter="{Binding ElementName=ChartOverall}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_office_excel}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <!--TODO:jezyki-->
                    <Button Margin="567,-40,0,0"
                            HorizontalAlignment="Left" VerticalAlignment="Top"
                            ToolTip="wlacz data grid"
                            Command="{Binding RefreshDataGridOverall1}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_column_two}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>
                    <!--TODO:jezyki-->
                    <Button Margin="617,-40,0,0"
                            HorizontalAlignment="Left" VerticalAlignment="Top"
                            ToolTip="wlacz wykres"
                            Command="{Binding RefreshDataOverall1}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_graph_bar}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <!--TODO:jezyki-->
                    <Button Margin="570,276,0,0"
                            HorizontalAlignment="Left" VerticalAlignment="Top"
                            ToolTip="wlacz data grid"
                            Command="{Binding RefreshDataGridOverall2}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_column_two}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>
                    <!--TODO:jezyki-->
                    <Button Margin="617,276,0,0"
                            HorizontalAlignment="Left" VerticalAlignment="Top"
                            ToolTip="wlacz wykres"
                            Command="{Binding RefreshDataOverall2}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_graph_bar}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <StackPanel Width="307" HorizontalAlignment="Left" Margin="0,36,0,397"
                                Visibility="{Binding IsDataOverallEmpty, Converter={StaticResource NegativeBooleanToVisibilityConverter}}">
                        <StackPanel>
                            <TextBlock Text="{x:Static res:Resources.AmountInquiries}" FontSize="20"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <TextBlock Text="Science Direct:" FontSize="15" />
                            <TextBlock Text=" "></TextBlock>
                            <TextBlock Text="{Binding CurrentScienceDirectCount, UpdateSourceTrigger=PropertyChanged}" FontSize="15" Background="Transparent" Width="50"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <TextBlock HorizontalAlignment="Right" Text="Scopus:" FontSize="15"/>
                            <TextBlock Text=" "></TextBlock>
                            <TextBlock Text="{Binding CurrentScopusCount, UpdateSourceTrigger=PropertyChanged}" FontSize="15" Background="Transparent" Width="50"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <TextBlock HorizontalAlignment="Right" Text="Springer:" FontSize="15"></TextBlock>
                            <TextBlock Text=" "></TextBlock>
                            <TextBlock Text="{Binding CurrentSpringerCount, UpdateSourceTrigger=PropertyChanged}" FontSize="15" Background="Transparent" Width="50"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <TextBlock HorizontalAlignment="Right" Text="IEEE Xplore:" FontSize="15"/>
                            <TextBlock Text=" "></TextBlock>
                            <TextBlock Text="{Binding CurrentIeeeXploreCount, UpdateSourceTrigger=PropertyChanged}" FontSize="15" Background="Transparent" Width="50"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <TextBlock HorizontalAlignment="Right" FontWeight="Bold" Text="{x:Static res:Resources.Sum}" FontSize="15" TextDecorations="Overline"/>
                            <TextBlock Text=" "/>
                            <TextBlock Text="{Binding CurrentSumCount, UpdateSourceTrigger=PropertyChanged}" TextDecorations="Overline" FontSize="15" Width="50"/>
                        </StackPanel>
                    </StackPanel>

                    <lvc:PieChart x:Name="ChartOverall"
                                  LegendLocation="Right"
                                  Visibility="{Binding ChartDataOverall1Loading, Converter={StaticResource BooleanToVisibilityConverter}}"
                                  Series="{Binding SeriesCollectionSearchCount, UpdateSourceTrigger=PropertyChanged}"
                                  Width="400" Height="276"
                                  HorizontalAlignment="Right" 
                                  VerticalAlignment="Top">
                    </lvc:PieChart>

                    <DataGrid ItemsSource="{Binding OverallStatisticsObservableCollection}"
                              AutoGenerateColumns="False"
                              Visibility="{Binding DataGridOverall1Loading, Converter={StaticResource BooleanToVisibilityConverter}}"
                              HorizontalAlignment="Right"
                              VerticalAlignment="Top"
                              Width="390" Height="166" 
                              Margin="0,10,10,0">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Baza" Binding="{Binding Database}" IsReadOnly="True" />
                            <DataGridTextColumn Header="Ilość" Binding="{Binding Amount}" IsReadOnly="True"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <StackPanel Visibility="{Binding IsDataOverallEmpty, Converter={StaticResource NegativeBooleanToVisibilityConverter}}"
                                Margin="0,351,397,137">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                            <TextBlock Text="{x:Static res:Resources.AmountDownloadedPublications}" FontSize="20"/>
                            <TextBlock Text=" "></TextBlock>
                            <TextBlock Text="{Binding CurrentPublicationsDownloadCount, UpdateSourceTrigger=PropertyChanged}" FontSize="20" Width="50"/>
                        </StackPanel>
                        <TextBlock Text=""></TextBlock>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                            <TextBlock Text="{x:Static res:Resources.AmountFoundDuplicates}" FontSize="20"/>
                            <TextBlock Text=" "></TextBlock>
                            <TextBlock Text="{Binding CurrentDuplicateCount, UpdateSourceTrigger=PropertyChanged}" FontSize="20" Width="50"/>
                        </StackPanel>
                    </StackPanel>

                    <lvc:PieChart x:Name="ChartOverall2"
                                  Series="{Binding SeriesCollectionDuplicateAndDownloadCount}"
                                  Visibility="{Binding ChartDataOverall2Loading, Converter={StaticResource BooleanToVisibilityConverter}}"
                                  LegendLocation="Bottom"
                                  InnerRadius="30"
                                  Margin="332,329,37,20">
                        <lvc:PieChart.DataTooltip>
                            <lvc:DefaultTooltip BulletSize="20"></lvc:DefaultTooltip>
                        </lvc:PieChart.DataTooltip>
                    </lvc:PieChart>

                    <DataGrid ItemsSource="{Binding OverallStatistics2ObservableCollection}"
                              Visibility="{Binding DataGridOverall2Loading, Converter={StaticResource BooleanToVisibilityConverter}}"
                              HorizontalAlignment="Right"
                              AutoGenerateColumns="False"
                              VerticalAlignment="Top"
                              Margin="0,329,10,0" Width="382" Height="127">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Nazwa" Binding="{Binding Name}" IsReadOnly="True"/>
                            <DataGridTextColumn Header="Ilosc" Binding="{Binding Amount}" IsReadOnly="True"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!--TODO: jezyki-->
                    <TextBlock Text="Brak danych do wyświetlenia!"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               FontSize="20"
                               Visibility="{Binding IsDataOverallEmpty, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                </Grid>
            </controls:MetroTabItem>

            <controls:MetroTabItem Header="{x:Static res:Resources.ByYear}" Height="41" VerticalAlignment="Top">
                <Grid>
                    <!--<Button HorizontalAlignment="Left" VerticalAlignment="Top"
                            Margin="0,10,0,0"
                            ToolTip="{x:Static res:Resources.RefreshData}"
                            Command="{Binding RefreshData}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_refresh}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>-->

                    <Button HorizontalAlignment="Left" VerticalAlignment="Top"
                            Margin="50,10,0,0"
                            ToolTip="{x:Static res:Resources.ExportToPng}"
                            Visibility="{Binding ChartDataByYearFullLoading, Converter={StaticResource NegativeBooleanToVisibilityConverter}}"
                            Command="{Binding ExportChartToImageCommand}"
                            CommandParameter="{Binding ElementName=ChartByYear}">
                        <Rectangle Width="50" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_image_export}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <Button HorizontalAlignment="Left" VerticalAlignment="Top"
                            Margin="50,10,0,0"
                            ToolTip="{x:Static res:Resources.ExportToPng}"
                            Visibility="{Binding ChartDataByYearFullLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                            Command="{Binding ExportChartToImageCommand}"
                            CommandParameter="{Binding ElementName=ChartByYearFull}">
                        <Rectangle Width="50" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_image_export}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <Button HorizontalAlignment="Left" VerticalAlignment="Top"
                            Margin="117,10,0,0"
                            ToolTip="{x:Static res:Resources.ExportToCsv}"
                            Command="{Binding ExportChartDataToCsvCommand3}"
                            CommandParameter="{Binding ElementName=ChartOverall}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_office_excel}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>
                    <!--TODO:jezyki-->
                    <Button HorizontalAlignment="Left" VerticalAlignment="Top"
                            Margin="167,10,0,0"
                            ToolTip="EKSPORT FULL DATA GRID"
                            Command="{Binding ExportChartDataToCsvCommand3_1}"
                            CommandParameter="{Binding ElementName=ChartOverall}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_office_excel}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <TextBox Text="{Binding QueryTextBox, UpdateSourceTrigger=PropertyChanged}" 
                             Width="102" Height="44" 
                             Margin="217,10,0,0" 
                             FontSize="22"
                             VerticalAlignment="Top" HorizontalAlignment="Left"
                             controls:TextBoxHelper.Watermark="{x:Static res:Resources.FilterData}"/>

                    <Button Margin="327,10,0,0"
                            HorizontalAlignment="Left" VerticalAlignment="Top" 
                            Command="{Binding SearchCommand}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_magnify}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <!--TODO:jezyki-->
                    <Button Margin="377,10,0,0"
                            HorizontalAlignment="Left" VerticalAlignment="Top"
                            ToolTip="wlacz data grid"
                            Command="{Binding RefreshDataGridByYear}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_column_two}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>
                    <!--TODO:jezyki-->
                    <Button Margin="427,10,0,0"
                            HorizontalAlignment="Left" VerticalAlignment="Top"
                            ToolTip="wlacz wykres"
                            Command="{Binding RefreshDataByYear}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_graph_bar}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>
                    <!--TODO:jezyki-->
                    <Button Margin="477,10,0,0"
                            HorizontalAlignment="Left" VerticalAlignment="Top"
                            ToolTip="wlacz data grid FULL"
                            Command="{Binding RefreshDataGridByYearFull}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_column_two}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>
                    <!--TODO:jezyki-->
                    <Button Margin="527,10,0,0"
                            HorizontalAlignment="Left" VerticalAlignment="Top"
                            ToolTip="wlacz wykres FULL"
                            Command="{Binding RefreshDataByYearFull}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_graph_bar}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <Button Margin="288,11,0,0"
                            Width="30" Height="42"
                            HorizontalAlignment="Left" VerticalAlignment="Top" 
                            BorderThickness="0"
                            Foreground="Transparent"
                            Background="Transparent"
                            BorderBrush="White"
                            Command="{Binding RefreshDataByYear}">
                        <Rectangle Width="16" Height="16" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_clear_reflect_horizontal}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <lvc:CartesianChart x:Name="ChartByYear"
                                        Series="{Binding SeriesCollectionByYear}" 
                                        LegendLocation="None" 
                                        Visibility="{Binding ChartDataByYearLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                                        Margin="10,66,10,47">
                        <lvc:CartesianChart.DataTooltip>
                            <lvc:DefaultTooltip SelectionMode="OnlySender"/>
                        </lvc:CartesianChart.DataTooltip>
                        <lvc:CartesianChart.AxisX>
                            <lvc:Axis Labels="{Binding LabelsYear}">
                                <lvc:Axis.Separator >
                                    <lvc:Separator Step="1"></lvc:Separator>
                                </lvc:Axis.Separator>
                            </lvc:Axis>
                        </lvc:CartesianChart.AxisX>
                        <lvc:CartesianChart.AxisY>
                            <lvc:Axis LabelFormatter="{Binding Formatter, StringFormat='{}{0:#}'}" FontSize="20"/>
                        </lvc:CartesianChart.AxisY>
                    </lvc:CartesianChart>

                    <DataGrid ItemsSource="{Binding DataByYearObservableCollection}"
                              AutoGenerateColumns="False"
                              Visibility="{Binding DataGridByYearLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                              Margin="10,66,10,47">
                        <DataGrid.Columns>
                            <!-- TODO: jezyki -->
                            <DataGridTextColumn Header="Nazwa" Binding="{Binding Year}"  IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style>
                                        <Setter Property="TextBlock.TextWrapping" Value="Wrap" />
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <!--TODO: jezyki-->
                            <DataGridTextColumn Header="ilość" Binding="{Binding Amount}"  IsReadOnly="True"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <lvc:CartesianChart x:Name="ChartByYearFull"
                                        Series="{Binding SeriesCollectionByYearFull}" 
                                        LegendLocation="None" 
                                        Visibility="{Binding ChartDataByYearFullLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                                        Margin="10,66,10,47">
                        <lvc:CartesianChart.DataTooltip>
                            <lvc:DefaultTooltip SelectionMode="OnlySender"/>
                        </lvc:CartesianChart.DataTooltip>
                        <lvc:CartesianChart.AxisX>
                            <lvc:Axis Labels="{Binding LabelsYearFull}" LabelsRotation="{Binding ValueLabelRotation}" FontSize="{Binding ValueFontSize}">
                                <lvc:Axis.Separator >
                                    <lvc:Separator Step="1"></lvc:Separator>
                                </lvc:Axis.Separator>
                            </lvc:Axis>
                        </lvc:CartesianChart.AxisX>
                        <lvc:CartesianChart.AxisY>
                            <lvc:Axis LabelFormatter="{Binding Formatter, StringFormat='{}{0:#}'}" FontSize="20"/>
                        </lvc:CartesianChart.AxisY>
                    </lvc:CartesianChart>

                    <DataGrid ItemsSource="{Binding DataByYearObservableCollectionFull}"
                              AutoGenerateColumns="False"
                              Visibility="{Binding DataGridByYearFullLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                              Margin="10,66,10,47">
                        <DataGrid.Columns>
                            <!-- TODO: jezyki -->
                            <DataGridTextColumn Header="Nazwa" Binding="{Binding Year}"  IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style>
                                        <Setter Property="TextBlock.TextWrapping" Value="Wrap" />
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <!--TODO: jezyki-->
                            <DataGridTextColumn Header="ilość" Binding="{Binding Amount}"  IsReadOnly="True"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!--TODO: jezyki-->
                    <TextBlock Text="Brak danych do wyświetlenia!"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               FontSize="20"
                               Visibility="{Binding IsDataByYearEmpty, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                </Grid>
            </controls:MetroTabItem>

            <controls:MetroTabItem Header="{x:Static res:Resources.ByAuthors}">
                <Grid>
                    <Button HorizontalAlignment="Left" VerticalAlignment="Top"
                            Margin="50,10,0,0"
                            ToolTip="{x:Static res:Resources.ExportToPng}"
                            Command="{Binding ExportChartToImageCommand}"
                            CommandParameter="{Binding ElementName=ChartByYear}">
                        <Rectangle Width="50" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_image_export}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <Button HorizontalAlignment="Left" VerticalAlignment="Top"
                            Margin="117,10,0,0"
                            ToolTip="{x:Static res:Resources.ExportToCsv}"
                            Command="{Binding ExportChartDataToCsvCommand4}"
                            CommandParameter="{Binding ElementName=ChartMagazine}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_office_excel}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <TextBox Text="{Binding QueryTextBox, UpdateSourceTrigger=PropertyChanged}" 
                             Width="102" Height="44" 
                             Margin="167,10,0,0" 
                             FontSize="22"
                             VerticalAlignment="Top" HorizontalAlignment="Left"
                             controls:TextBoxHelper.Watermark="{x:Static res:Resources.FilterData}"/>

                    <Button Margin="277,10,0,0"
                            HorizontalAlignment="Left" VerticalAlignment="Top" 
                            Command="{Binding SearchCommand}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_magnify}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>
                    <!--TODO:jezyki-->
                    <Button Margin="327,10,0,0"
                            HorizontalAlignment="Left" VerticalAlignment="Top"
                            ToolTip="wlacz data grid"
                            Command="{Binding RefreshDataGridByAuthor}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_column_two}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>
                    <!--TODO:jezyki-->
                    <Button Margin="377,10,0,0"
                            HorizontalAlignment="Left" VerticalAlignment="Top"
                            ToolTip="wlacz wykres"
                            Command="{Binding RefreshDataByAuthor}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_graph_bar}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <Button Margin="238,11,0,0"
                            Width="30" Height="42"
                            HorizontalAlignment="Left" VerticalAlignment="Top" 
                            BorderThickness="0"
                            Foreground="Transparent"
                            Background="Transparent"
                            BorderBrush="White"
                            Command="{Binding RefreshData}">
                        <Rectangle Width="16" Height="16" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_clear_reflect_horizontal}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <lvc:CartesianChart x:Name="ChartAuthor"
                                        Series="{Binding SeriesCollectionByAuthor}" 
                                        LegendLocation="None"
                                        Visibility="{Binding ChartDataByAuthorLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                                        Margin="10,66,10,47">
                        <lvc:CartesianChart.DataTooltip>
                            <lvc:DefaultTooltip SelectionMode="OnlySender"/>
                        </lvc:CartesianChart.DataTooltip>
                        <lvc:CartesianChart.AxisY>
                            <lvc:Axis LabelFormatter="{Binding Formatter, StringFormat='{}{0:#}'}" FontSize="20"/>
                        </lvc:CartesianChart.AxisY>
                    </lvc:CartesianChart>

                    <DataGrid ItemsSource="{Binding DataByAuthorObservableCollection}"
                              AutoGenerateColumns="False"
                              Visibility="{Binding DataGridByAuthorLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                              Margin="10,66,10,47">
                        <DataGrid.Columns>
                            <!-- TODO: jezyki -->
                            <DataGridTextColumn Header="Imię" Binding="{Binding Name}"  IsReadOnly="True"/>
                            <DataGridTextColumn Header="Nazwisko" Binding="{Binding Surname}"  IsReadOnly="True"/>
                            <!--TODO: jezyki-->
                            <DataGridTextColumn Header="ilość" Binding="{Binding Amount}"  IsReadOnly="True"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!--TODO: jezyki-->
                    <TextBlock Text="Brak danych do wyświetlenia!"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               FontSize="20"
                               Visibility="{Binding IsDataByAuthorEmpty, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                </Grid>
            </controls:MetroTabItem>

            <controls:MetroTabItem Header="Wg czasopism">
                <Grid>
                    <Button HorizontalAlignment="Left" VerticalAlignment="Top"
                            Margin="50,10,0,0"
                            ToolTip="{x:Static res:Resources.ExportToPng}"
                            Command="{Binding ExportChartToImageCommand}"
                            CommandParameter="{Binding ElementName=ChartByMagazine}">
                        <Rectangle Width="50" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_image_export}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <!--<Button HorizontalAlignment="Left" VerticalAlignment="Top"
                            Margin="50,10,0,0"
                            ToolTip="{x:Static res:Resources.ExportToPng}"
                            Command="{Binding ExportChartToImageCommand}"
                            CommandParameter="{Binding ElementName=ChartByMagazineFull}">
                        <Rectangle Width="50" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_image_export}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>-->

                    <Button HorizontalAlignment="Left" VerticalAlignment="Top"
                            Margin="117,10,0,0"
                            ToolTip="{x:Static res:Resources.ExportToCsv}"
                            Command="{Binding ExportChartDataToCsvCommand4}"
                            CommandParameter="{Binding ElementName=ChartMagazine}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_office_excel}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <Button HorizontalAlignment="Left" VerticalAlignment="Top"
                            Margin="167,10,0,0"
                            ToolTip="FULL EKSPORT"
                            Command="{Binding ExportChartDataToCsvCommand4_1}"
                            CommandParameter="{Binding ElementName=ChartMagazine}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_office_excel}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <!--TODO:jezyki-->
                    <Button Margin="217,10,0,0"
                            HorizontalAlignment="Left" VerticalAlignment="Top"
                            ToolTip="wlacz data grid"
                            Command="{Binding RefreshDataByMagazineDataGrid}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_column_two}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>
                    <!--TODO:jezyki-->
                    <Button Margin="267,10,0,0"
                            HorizontalAlignment="Left" VerticalAlignment="Top"
                            ToolTip="wlacz wykres"
                            Command="{Binding RefreshDataByMagazineChart}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_graph_bar}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>

                    <!--TODO:jezyki-->
                    <Button Margin="317,10,0,0"
                            HorizontalAlignment="Left" VerticalAlignment="Top"
                            ToolTip="wlacz data grid full"
                            Command="{Binding RefreshDataByMagazineDataGridFull}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_column_two}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>
                    <!--TODO:jezyki--><!--
                    <Button Margin="367,10,0,0"
                            HorizontalAlignment="Left" VerticalAlignment="Top"
                            ToolTip="wlacz wykres full"
                            Command="{Binding RefreshDataByMagazineChartFull}">
                        <Rectangle Width="32" Height="32" Fill="{DynamicResource BlackBrush}">
                            <Rectangle.OpacityMask>
                                <VisualBrush Stretch="Fill" Visual="{DynamicResource appbar_graph_bar}"/>
                            </Rectangle.OpacityMask>
                        </Rectangle>
                    </Button>-->

                    <lvc:CartesianChart x:Name="ChartByMagazine"
                                        Series="{Binding SeriesCollectionByMagazine}" 
                                        LegendLocation="None"
                                        Visibility="{Binding ChartDataLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                                        Margin="10,66,10,47">
                        <lvc:CartesianChart.DataTooltip>
                            <lvc:DefaultTooltip SelectionMode="OnlySender"/>
                        </lvc:CartesianChart.DataTooltip>
                        <lvc:CartesianChart.AxisX>
                            <lvc:Axis Title=" " Labels=" "/>
                        </lvc:CartesianChart.AxisX>
                        <lvc:CartesianChart.AxisY>
                            <lvc:Axis LabelFormatter="{Binding Formatter, StringFormat='{}{0:#}'}" FontSize="20"/>
                        </lvc:CartesianChart.AxisY>
                    </lvc:CartesianChart>

                    <DataGrid ItemsSource="{Binding DataByMagazineObservableCollection}"
                              AutoGenerateColumns="False"
                              Visibility="{Binding DataGridLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                              Margin="10,66,10,47">
                        <DataGrid.Columns>
                            <!-- TODO: jezyki -->
                            <DataGridTextColumn Header="Nazwa" Binding="{Binding Name}"  IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style>
                                        <Setter Property="TextBlock.TextWrapping" Value="Wrap" />
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <!--TODO: jezyki-->
                            <DataGridTextColumn Header="ilość" Binding="{Binding Amount}"  IsReadOnly="True"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <lvc:CartesianChart x:Name="ChartByMagazineFull"
                                        Series="{Binding SeriesCollectionByMagazineFull}" 
                                        LegendLocation="None"
                                        Visibility="{Binding ChartDataByMagazineFullLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                                        Margin="10,66,10,47">
                        <lvc:CartesianChart.DataTooltip>
                            <lvc:DefaultTooltip SelectionMode="OnlySender"/>
                        </lvc:CartesianChart.DataTooltip>
                        <lvc:CartesianChart.AxisY>
                            <lvc:Axis LabelFormatter="{Binding Formatter, StringFormat='{}{0:#}'}" FontSize="20"/>
                        </lvc:CartesianChart.AxisY>
                    </lvc:CartesianChart>

                    <DataGrid ItemsSource="{Binding DataByMagazineObservableCollectionFull}"
                              AutoGenerateColumns="False"
                              Visibility="{Binding DataGridByMagazineFullLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                              Margin="10,66,10,47">
                        <DataGrid.Columns>
                            <!-- TODO: jezyki -->
                            <DataGridTextColumn Header="Nazwa" Binding="{Binding Name}"  IsReadOnly="True">
                                <DataGridTextColumn.ElementStyle>
                                    <Style>
                                        <Setter Property="TextBlock.TextWrapping" Value="Wrap" />
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <!--TODO: jezyki-->
                            <DataGridTextColumn Header="ilość" Binding="{Binding Amount}"  IsReadOnly="True"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <!--TODO: jezyki-->
                    <TextBlock Text="Brak danych do wyświetlenia!"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               FontSize="20"
                               Visibility="{Binding IsDataByMagazineEmpty, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                </Grid>
            </controls:MetroTabItem>
        </TabControl>
    </Grid>
</UserControl>

